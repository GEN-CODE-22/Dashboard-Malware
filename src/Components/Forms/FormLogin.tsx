import React from "react";
import { Form, Formik } from "formik";
import * as Yup from "yup";
import { signIn } from "next-auth/react";
import { MyInput } from "../FormComponents";

interface InitialValues {
  usuario: string;
  password: string;
}

export const LoginForm = () => {
  const validateSchema = Yup.object({
    usuario: Yup.string().required("Requerido"),
    password: Yup.string().required("Requerido"),
  });

  const initialValues: InitialValues = {
    usuario: "",
    password: "",
  };

  const onSubmit = async (values: InitialValues) => {
    try {
      const res = await signIn("credentials", { ...values });
    } catch (error) {
      //       toast.error((error as Error).message);
    }
  };

  return (
    <Formik
      validationSchema={validateSchema}
      initialValues={initialValues}
      onSubmit={onSubmit}
    >
      <Form>
        <div>
          <div className="flex -mx-3 mt-10">
            <div className="w-full px-3 mb-5">
              <MyInput
                label={"Usuario"}
                name={"usuario"}
                type="text"
                placeholder="GEN_USER"
              />
            </div>
          </div>
          <div className="flex -mx-3">
            <div className="w-full px-3 mb-12">
              <MyInput
                label={"Password"}
                name={"password"}
                type="password"
                placeholder="********"
              />
            </div>
          </div>
          <div className="flex -mx-3">
            <div className="w-full px-3 mb-5">
              <button
                type="submit"
                className="block w-full max-w-xs mx-auto bg-gray-800 hover:bg-gray-900 focus:bg-gray-800 text-white rounded-lg px-3 py-3 font-semibold"
              >
                Inicia Sesi√≥n
              </button>
            </div>
          </div>
        </div>
      </Form>
    </Formik>
  );
};
