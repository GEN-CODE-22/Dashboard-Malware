import serverGEN from "@/api/genApi";
import { IMail } from "@/interfaces";
import { AppDispatch, StoreApp } from "@/redux/store";
import { addAllMails, addLast5Mails } from "./mails_slice";

export const LoadLast5Mails = () => {
  return async (dispatch: AppDispatch, state: () => StoreApp) => {
    const response = await serverGEN.post<IMail[]>(
      "/api/malware/getLast5Mails"
    );
    dispatch(addLast5Mails(response.data));
  };
};

export const LoadMails = (FechaInicio: Date, FechaFin: Date) => {
  return async (dispatch: AppDispatch, state: () => StoreApp) => {
    const response = await serverGEN.post<IMail[]>(
      "/api/malware/getMailsRangeDateServerAll",
      {
        FechaInicio,
        FechaFin,
      }
    );
    dispatch(addAllMails(response.data));
  };
};
